<?xml version="1.0" encoding="UTF-8"?>
<idea-plugin>
    <id>com.julianbruyers.gologo</id>
    <name>GoLogo</name>
    <version>1.0.0</version>
    <vendor>Julian Bruyers</vendor>
    <icon>/META-INF/pluginIcon.svg</icon>

    <depends>com.intellij.modules.platform</depends>
    <depends>org.jetbrains.plugins.go</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- File icon provider with highest priority -->
        <fileIconProvider implementation="com.julianbruyers.gologo.GoLogo" order="first"/>
        <!-- PSI icon provider with highest priority -->
        <iconProvider implementation="com.julianbruyers.gologo.GoIconProvider" order="first"/>
        <!-- Icon layer provider for additional customization -->
        <iconLayerProvider implementation="com.julianbruyers.gologo.GoIconLayerProvider" order="first"/>
        <!-- Startup activity to override action icons -->
        <postStartupActivity implementation="com.julianbruyers.gologo.GoActionIconOverride"/>
        <!-- Enhanced action discovery and override -->
        <postStartupActivity implementation="com.julianbruyers.gologo.GoActionDiscoveryOverride"/>
        <!-- Application service for dynamic action icon override -->
        <applicationService serviceImplementation="com.julianbruyers.gologo.GoActionIconListener"/>
    </extensions>

    <actions>
        <!-- Custom Go actions with Go logo icons -->
        <action id="GoLogo.NewGoFile"
                class="com.julianbruyers.gologo.GoNewFileAction"
                text="Go File"
                description="Create a new Go file">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="NewFile"/>
        </action>
        
        <action id="GoLogo.RefreshIcons" 
                class="com.julianbruyers.gologo.RefreshIconsAction"
                text="Refresh Go Icons"
                description="Refresh Go Logo icons">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>